<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>QEMU/Windows guest - Gentoo Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":!1,"wgNamespaceNumber":0,"wgPageName":"QEMU/Windows_guest","wgTitle":"QEMU/Windows guest","wgCurRevisionId":517370,"wgRevisionId":517370,"wgArticleId":1891,"wgIsArticle":!0,"wgIsRedirect":!1,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Virtualization"],"wgBreakFrames":!1,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"QEMU/Windows_guest","wgRelevantArticleId":1891,"wgIsProbablyEditable":!1,"wgRestrictionEdit":[],"wgRestrictionMove":[],"sfgAutocompleteValues":[],"sfgAutocompleteOnAllChars":!1,"sfgFieldProperties":[],
"sfgCargoFields":[],"sfgDependentFields":[],"sfgShowOnSelect":[],"sfgScriptPath":"/extensions/SemanticForms","edgValues":null,"sfgEDSettings":null,"wgWikiEditorEnabledModules":{"toolbar":!0,"dialogs":!0,"preview":!0,"publish":!1},"wgULSAcceptLanguageList":["en-us","en"],"wgULSCurrentAutonym":"English"});mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});mw.loader.load(["ext.gentooPackages","ext.smw.style","mediawiki.page.startup","mediawiki.legacy.wikibits","ext.uls.init"]);
} );</script>
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cext.uls.nojs%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.tyrian.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=ext.smw.style%7Cext.smw.tooltip.styles&amp;only=styles&amp;skin=tyrian" />
<link rel="stylesheet" href="https://assets.gentoo.org/tyrian/bootstrap.min.css" />
<link rel="stylesheet" href="https://assets.gentoo.org/tyrian/tyrian.min.css" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=tyrian" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}</style>
<script async="" src="/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=tyrian"></script>
<meta name="generator" content="MediaWiki 1.26.2-gentoo" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="theme-color" content="#54487a" />
<link rel="ExportRDF" type="application/rdf+xml" title="QEMU/Windows guest" href="/index.php?title=Special:ExportRDF/QEMU/Windows_guest&amp;xmlmime=rdf" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="Gentoo Wiki (en)" />
<link rel="EditURI" type="application/rsd+xml" href="//wiki.gentoo.org/api.php?action=rsd" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="Gentoo Wiki Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-QEMU_Windows_guest skin-tyrian action-view">
	<div class="mw-jump sr-only">
		Jump to:		<a href="#top">content</a>
	</div>
	<header>
		<div class="site-title">
			<div class="container">
				<div class="row">
					<div class="site-title-buttons">
						<div class="btn-group btn-group-sm">
							<a href="https://get.gentoo.org/" role="button" class="btn get-gentoo"><span class="fa fa-fw fa-download"></span> <strong>Get Gentoo!</strong></a>
							<div class="btn-group btn-group-sm">
								<a class="btn gentoo-org-sites dropdown-toggle" data-toggle="dropdown" data-target="#" href="#">
									<span class="fa fa-fw fa-map-o"></span> <span class="hidden-xs">gentoo.org sites</span> <span class="caret"></span>
								</a>
								<ul class="dropdown-menu dropdown-menu-right">
									<li><a href="https://www.gentoo.org/" title="Main Gentoo website"><span class="fa fa-home fa-fw"></span> gentoo.org</a></li>
									<li><a href="https://wiki.gentoo.org/" title="Find and contribute documentation"><span class="fa fa-file-text-o fa-fw"></span> Wiki</a></li>
									<li><a href="https://bugs.gentoo.org/" title="Report issues and find common issues"><span class="fa fa-bug fa-fw"></span> Bugs</a></li>
									<li><a href="https://forums.gentoo.org/" title="Discuss with the community"><span class="fa fa-comments-o fa-fw"></span> Forums</a></li>
									<li><a href="https://packages.gentoo.org/" title="Find software for your Gentoo"><span class="fa fa-hdd-o fa-fw"></span> Packages</a></li>
									<li class="divider"></li>
									<li><a href="https://planet.gentoo.org/" title="Find out what's going on in the developer community"><span class="fa fa-rss fa-fw"></span> Planet</a></li>
									<li><a href="https://archives.gentoo.org/" title="Read up on past discussions"><span class="fa fa-archive fa-fw"></span> Archives</a></li>
									<li><a href="https://sources.gentoo.org/" title="Browse our source code"><span class="fa fa-code fa-fw"></span> Sources</a></li>
									<li class="divider"></li>
									<li><a href="https://infra-status.gentoo.org/" title="Get updates on the services provided by Gentoo"><span class="fa fa-server fa-fw"></span> Infra Status</a></li>
								</ul>
							</div>
						</div>
					</div>
					<div class="logo">
						<a href="/" title="Back to the homepage" class="site-logo"><object data="https://assets.gentoo.org/tyrian/site-logo.svg" type="image/svg+xml">
							<img src="https://assets.gentoo.org/tyrian/site-logo.png" alt="Gentoo Linux Logo">
						</object></a>
						<span class="site-label">Wiki</span>
					</div>
				</div>
			</div>
		</div>
		<nav class="tyrian-navbar" role="navigation">
			<div class="container">
				<div class="row">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-main-collapse">
							<span class="sr-only">Toggle navigation</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
					</div>
					<div class="collapse navbar-collapse navbar-main-collapse">
						<ul class="nav navbar-nav">
							<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li><li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-help"><a href="/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>			<li class="dropdown">
				<a href="/wiki/Gentoo_Wiki:Menu-Gentoo" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Gentoo <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Projects"><a href="/wiki/Project:Gentoo">Gentoo Projects</a></li>				</ul>
			</li>
					<li class="dropdown">
				<a href="/wiki/Gentoo_Wiki:Menu-Documentation" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Documentation <span class="caret"></span></a>
				<ul class="dropdown-menu" role="menu">
		<li id="n-Gentoo-Handbook"><a href="/wiki/Handbook:Main_Page">Gentoo Handbook</a></li><li id="n-Gentoo-FAQ"><a href="/wiki/FAQ">Gentoo FAQ</a></li><li id="n-Featured-Documents"><a href="/wiki/Project:Documentation/Overview">Featured Documents</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Topics</li><li id="n-Core-system"><a href="/wiki/Category:Core_system">Core system</a></li><li id="n-Hardware"><a href="/wiki/Category:Hardware">Hardware</a></li><li id="n-Software"><a href="/wiki/Category:Software">Software</a></li><li id="n-Desktop"><a href="/wiki/Category:Desktop">Desktop</a></li><li id="n-Server-.26-Security"><a href="/wiki/Category:Server_and_Security">Server &amp; Security</a></li><li id="n-Project-.26-Community"><a href="/wiki/Category:Project_and_Community">Project &amp; Community</a></li>				</ul>
			</li>
								</ul>
						<ul class="nav navbar-nav navbar-right hidden-xs">
									<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-cog"></i> Tools <span class="caret"></span></a>
			<ul class="dropdown-menu" role="menu">
				<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/QEMU/Windows_guest" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/QEMU/Windows_guest" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="/index.php?title=QEMU/Windows_guest&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="/index.php?title=QEMU/Windows_guest&amp;oldid=517370" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="/index.php?title=QEMU/Windows_guest&amp;action=info" title="More information about this page">Page information</a></li><li id="t-smwbrowselink"><a href="/wiki/Special:Browse/QEMU-2FWindows_guest" rel="smw-browse">Browse properties</a></li>			</ul>
		</li>
			<li class="dropdown">
			<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
				<span class="glyphicon glyphicon-user" aria-label="Personal tools"></span>
				User				<span class="caret"></span>
			</a>
			<ul class="dropdown-menu" role="menu">
				<li id="pt-createaccount"><a href="/index.php?title=Special:UserLogin&amp;returnto=QEMU%2FWindows+guest&amp;type=signup" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=QEMU%2FWindows+guest" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>			</ul>
		</li>
								</ul>
					</div>
				</div>
			</div>
		</nav>
		
		<nav class="navbar navbar-grey navbar-stick" id="wiki-actions" role="navigation">
			<div class="container"><div class="row">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#gw-toolbar">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="gw-toolbar">
					<ul class="nav navbar-nav">
					<li id="ca-nstab-main" class="selected active"><a href="/wiki/QEMU/Windows_guest" title="View the content page [c]" accesskey="c">Page</a></li><li id="ca-talk"><a href="/wiki/Talk:QEMU/Windows_guest" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>					</ul>
							<form action="/index.php" id="searchform" class="navbar-form navbar-right" role="search">
			<input type='hidden' name="title" value="Special:Search"/>

				<div class="input-group">
					<input type="search" name="search" placeholder="Search" title="Search Gentoo Wiki [f]" accesskey="f" id="searchInput" class="form-control" />					<div class="input-group-btn"><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton btn btn-default" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton btn btn-default" /></div>
				</div>
		</form>
						<ul class="nav navbar-nav navbar-right hidden-xs">
					<li id="ca-viewsource"><a href="/index.php?title=QEMU/Windows_guest&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li><li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">more <span class="caret"></span></a>
						<ul class="dropdown-menu" role="menu">
					<li id="ca-history"><a href="/index.php?title=QEMU/Windows_guest&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></li>							</ul>
						</li>
					</ul>
				</div>
			</div></div>
		</nav>
		</header>
	
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div id="content" class="mw-body" role="main">
						<a id="top"></a>
						
						<h1 id="firstHeading" class="first-header" lang="en">
							<span dir="auto">QEMU/Windows guest</span>
						</h1>

						<div id="bodyContent" class="mw-body-content">
							<div id="siteSub">From Gentoo Wiki</div>
							<div id="contentSub">
								<span class="subpages">&lt; <a href="/wiki/QEMU" title="QEMU">QEMU</a></span>							</div>
																					<div id="jump-to-nav" class="mw-jump">
								Jump to:								<a href="#column-one">navigation</a>, 								<a href="#searchInput">search</a>
							</div>

							<!-- start content -->
							<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>This article describes the setup of a Windows guest using <a href="/wiki/QEMU" title="QEMU">QEMU</a>.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Configuration"><span class="tocnumber">1</span> <span class="toctext">Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Host"><span class="tocnumber">1.1</span> <span class="toctext">Host</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Guest"><span class="tocnumber">1.2</span> <span class="toctext">Guest</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#SPICE"><span class="tocnumber">1.3</span> <span class="toctext">SPICE</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Guest_2"><span class="tocnumber">1.3.1</span> <span class="toctext">Guest</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Initialization_script"><span class="tocnumber">1.3.2</span> <span class="toctext">Initialization script</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Configuration">Configuration</span></h2>
<h3><span class="mw-headline" id="Host">Host</span></h3>
<p>To create a disk image for the virtual machine, run:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>qemu-img create -f qcow2 WindowsVM.img 15G</code></div></div>
<p>Download a Windows driver image from <a rel="nofollow" class="external text" href="https://fedoraproject.org/wiki/Windows_Virtio_Drivers#Direct_download">this location</a>.
</p><p>Since QEMU requires a lot of <a href="/wiki/QEMU/Options" title="QEMU/Options">options</a>, it would be a good idea to put them into a shell script, e.g.:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">WindowsVM.sh</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c">#!/bin/sh</span>
<span class="nb">exec </span>qemu-kvm <span class="se">\</span>
        -cpu host <span class="se">\</span>
        -drive <span class="nv">file</span><span class="o">=</span>WindowsVM.img,if<span class="o">=</span>virtio <span class="se">\</span>
        -net nic -net user,hostname<span class="o">=</span>windowsvm <span class="se">\</span>
        -m 1G <span class="se">\</span>
        -monitor stdio <span class="se">\</span>
        -name Windows <span class="se">\</span>
        <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
</pre></div></pre>
<p>Change the path to the disk image <span style="font-family: monospace; font-size: 95%">WindowsVM.img</span> in the script. Additional options can be used when calling the script. To boot the disk image, run:
</p>
<div class="cmd-box"><div><code style="color: #4E9A06; font-weight: bold;">user $</code><span class="tripleclick-separator"></span><code>./WindowsVM.sh -boot d -drive file=WINDOWS.iso,media=cdrom -drive file=DRIVER.iso,media=cdrom</code></div></div>
<p>Install the Windows guest. See the <a href="#Guest">guest section</a> for optimum support. After the installation start the script without the additional options.
</p>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />When upgrading to QEMU 1.3 the <code>-enable-kvm</code> must be added to keep the guest responsive. Also change <code>-net nic</code> to <code>-net nic,model=rtl8139</code> to have a network interface in your guest.</div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br />When upgrading to QEMU 1.5.3 you have to add <code>-display sdl,frame=off,window_close=off"</code> to keep your full screen session full screen. Without this option I got a (new) menu bar at the top of the screen, pushing the Windows bottom menu off screen.</div>
<div class="alert alert-info gw-box" style="padding-top: 8px; padding-bottom: 8px;"><strong><i class="fa fa-sticky-note-o fa-rotate-180"></i> Note</strong><br /> When upgrading to QEMU 2.0.0 replace <code>qemu-kvm</code> with <code>qemu-system-&lt;CPUTYPE&gt;</code> (e.g. qemu-system-x86_64) (you may need to add <code>-enable-kvm</code> switch); the qemu-kvm wrapper has been removed - see <span class="fa fa-bug fa-fw"></span><a rel="nofollow" class="external text" href="https://bugs.gentoo.org/show_bug.cgi?id=506566">bug #506566</a> </div>
<h3><span class="mw-headline" id="Guest">Guest</span></h3>
<ul><li> During installation at the partition step Windows doesn't detect the VirtIO hard drive. You have to tell Windows to use the <i>viostor</i> driver from the driver image.</li></ul>
<ul><li> After installation Windows doesn't for the VirtIO ethernet adapter. You have to tell Windows to use the <i>netkvm</i> driver from the driver image.</li></ul>
<ul><li> For 32 bit Windows 7 a sound driver for the <a rel="nofollow" class="external text" href="http://www.linux-kvm.org/page/Sound">Intel 82801AA AC97</a> exists. </li></ul>
<ul><li> For 64 bit Windows 7 Intel HDA is available as an option (QEMU option: <code>-soundhw hda</code>)</li></ul>
<ul><li> USB 2.0 pass through can be configured from host to guest with variations of: <code>-usb -device usb-ehci,id=ehci -device usb-host,bus=ehci.0,vendorid=1452</code></li></ul>
<ul><li> For Windows 8.1 USB tablet is available only with USB 2.0 pass through (QEMU option: <code>-device usb-ehci,id=ehci -device usb-tablet,bus=ehci.0</code></li></ul>
<h3><span class="mw-headline" id="SPICE">SPICE</span></h3>
<div class="list-group" style="width: 22em; float: right; clear: right; font-size: 90%; margin-left: 1em;">
<div class="list-group-item" style="display: flex; align-items: center; padding: 5px; min-height: 3em;"><span style="display: inline-block; width: 3em; overflow: hidden; text-align: center;"><span class="fa fa-home fa-fw fa-2x"></span></span> <span><a rel="nofollow" class="external text" href="http://www.spice-space.org/page/Running">Running SPICE</a></span></div>
<div class="list-group-item" style="display: flex; align-items: center; padding: 5px; min-height: 3em;"><span style="display: inline-block; width: 3em; overflow: hidden; text-align: center;"><span class="fa fa-home fa-fw fa-2x"></span></span> <span><a rel="nofollow" class="external text" href="http://www.linux-kvm.org/page/SPICE">SPICE (KVM)</a></span></div>
</div>
<p><a href="/wiki/QEMU" title="QEMU">QEMU</a> with <a rel="nofollow" class="external text" href="http://en.wikipedia.org/wiki/SPICE_%28protocol%29">SPICE</a> support enable (among other things) the more powerful QXL display device and makes clipboard sharing possible (copy/paste between clients and the virtual machine).
</p><p>To use SPICE with <a href="/wiki/QEMU" title="QEMU">QEMU</a> enable the following USE flag in <span style="font-family: monospace; font-size: 95%">package.use</span>:
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">/etc/portage/package.use</code></strong><strong>Setting USE variable</strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre>app-emulation/qemu   spice
</pre></div></pre>
<p>Build QEMU:
</p>
<div class="cmd-box"><div><code style="color: #ef2929; font-weight: bold;">root #</code><span class="tripleclick-separator"></span><code>emerge app-emulation/qemu</code></div></div>
<p>To connect spice server, you need a client like net-misc/spice-gtk.
</p>
<h4><span class="mw-headline" id="Guest_2">Guest</span></h4>
<p>On Windows guests you need to install <a rel="nofollow" class="external text" href="http://www.spice-space.org/download.html">Windows guest tools</a>.
</p><p>On Windows 8.1 guest if you want to set screen resolution more than 1024x768, you need to install drivers from <a rel="nofollow" class="external free" href="https://fedoraproject.org/wiki/Windows_Virtio_Drivers#Direct_download">https://fedoraproject.org/wiki/Windows_Virtio_Drivers#Direct_download</a> and <a rel="nofollow" class="external text" href="https://github.com/vrozenfe/qxl-dod">QXL WDDM DOD driver</a>. If you try to install Windows guest tool, QXL WDDM DOD driver won't work well because of Windows SPICE agent .
</p><p>If you want to try the new qlx-dod driver linked above, in order to use the driver you need to 'update' the basic windows display adapter driver and point it to the unzipped folder for the new driver. This can be found by: Right click the Start button -&gt; Device Manager. Expand 'Display adapters' and right click on the sub entry and hit update driver.
</p>
<h4><span class="mw-headline" id="Initialization_script">Initialization script</span></h4>
<p>To run <a href="/wiki/QEMU" title="QEMU">QEMU</a> from a script:
(with spicy in case you have installed net-misc/spice-gtk)
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">WindowsVM</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c">#!/bin/sh</span>
<span class="nv">SPICE_PORT</span><span class="o">=</span>5924
qemu-kvm -daemonize <span class="se">\</span>
    -cpu host <span class="se">\</span>
    -drive <span class="nv">file</span><span class="o">=</span>WindowsVM.img,if<span class="o">=</span>virtio <span class="se">\</span>
    -net nic -net user,hostname<span class="o">=</span>windowsvm <span class="se">\</span>
    -m 1G <span class="se">\</span>
    -vga qxl <span class="se">\</span>
    -spice <span class="nv">port</span><span class="o">=</span><span class="si">${</span><span class="nv">SPICE_PORT</span><span class="si">}</span>,disable-ticketing <span class="se">\</span>
    -usbdevice tablet <span class="se">\</span>
    -device virtio-serial <span class="se">\</span>
    -chardev spicevmc,id<span class="o">=</span>vdagent,name<span class="o">=</span>vdagent <span class="se">\</span>
    -device virtserialport,chardev<span class="o">=</span>vdagent,name<span class="o">=</span>com.redhat.spice.0 <span class="se">\</span>
    <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="nb">exec </span>spicy --title Windows 127.0.0.1 -p <span class="si">${</span><span class="nv">SPICE_PORT</span><span class="si">}</span>
</pre></div></pre>
<p>Or remote-viewer (app-emulation/virt-viewer):
</p>
<div class="box-caption"><span class="label" style="margin-right: .5em; background-color: #54487A">FILE</span> <strong><code style="border: none; background: none; color: #54487A; margin-right: .5em;">WindowsVM</code></strong><strong></strong></div><pre class="captioned"><div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c">#!/bin/sh</span>
<span class="nv">SPICE_PORT</span><span class="o">=</span>5924
qemu-kvm -daemonize <span class="se">\</span>
    -cpu host <span class="se">\</span>
    -drive <span class="nv">file</span><span class="o">=</span>WindowsVM.img,if<span class="o">=</span>virtio <span class="se">\</span>
    -net nic -net user,hostname<span class="o">=</span>windowsvm <span class="se">\</span>
    -m 1G <span class="se">\</span>
    -vga qxl <span class="se">\</span>
    -spice <span class="nv">port</span><span class="o">=</span><span class="si">${</span><span class="nv">SPICE_PORT</span><span class="si">}</span>,disable-ticketing <span class="se">\</span>
    -usbdevice tablet <span class="se">\</span>
    -device virtio-serial <span class="se">\</span>
    -chardev spicevmc,id<span class="o">=</span>vdagent,name<span class="o">=</span>vdagent <span class="se">\</span>
    -device virtserialport,chardev<span class="o">=</span>vdagent,name<span class="o">=</span>com.redhat.spice.0 <span class="se">\</span>
    <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="nb">exec </span>remote-viewer --title Windows spice://127.0.0.1:<span class="si">${</span><span class="nv">SPICE_PORT</span><span class="si">}</span>
</pre></div></pre>

<!-- 
NewPP limit report
Cached time: 20160827120653
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.152 seconds
Real time usage: 1.001 seconds
Preprocessor visited node count: 727/1000000
Preprocessor generated node count: 3503/1000000
Post‐expand include size: 14597/2097152 bytes
Template argument size: 7187/2097152 bytes
Highest expansion depth: 15/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  949.075      1 - -total
 90.60%  859.842      4 - Template:FileBox
 90.09%  855.038      4 - Template:PreBox
  2.98%   28.270      3 - Template:Note
  2.78%   26.366      2 - Template:Cmd
  2.61%   24.778      3 - Template:Note/core
  2.40%   22.814      3 - Template:GenericCmd
  1.84%   17.487      1 - Template:InfoBox_stack
  1.83%   17.324      1 - Template:Bug
  1.44%   13.628      1 - Template:Bug/site
-->

<!-- Saved in parser cache with key gentoo-wiki:pcache:idhash:1891-0!*!0!!en!*!* and timestamp 20160827120652 and revision id 517370
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="http://wiki.gentoo.org/index.php?title=QEMU/Windows_guest&amp;oldid=517370">http://wiki.gentoo.org/index.php?title=QEMU/Windows_guest&amp;oldid=517370</a>"</div>
															<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/wiki/Category:Virtualization" title="Category:Virtualization">Virtualization</a></li></ul></div></div>														<!-- end content -->

													</div>
					</div>
				</div>
			</div>
		</div>

			<footer>
		<div class="container">
			<div class="row">
				<div class="col-xs-12 col-md-offset-2 col-md-7">
											<div class="spacer"></div>
						<ul id="f-list">
																							<li id="lastmod"> This page was last modified on 21 July 2016, at 00:09.</li>
																															<li id="privacy"><a href="/wiki/Gentoo_Wiki:Privacy_policy" title="Gentoo Wiki:Privacy policy">Privacy policy</a></li>
																							<li id="about"><a href="/wiki/Gentoo_Wiki:About" title="Gentoo Wiki:About">About Gentoo Wiki</a></li>
																							<li id="disclaimer"><a href="/wiki/Gentoo_Wiki:General_disclaimer" title="Gentoo Wiki:General disclaimer">Disclaimers</a></li>
													</ul>
									</div>
				<div class="col-xs-12 col-md-3">
					<!-- No questions or comments, the Wiki has enough information on how to contact us. -->
				</div>
			</div>
			<div class="row">
				<div class="col-xs-3 col-md-2">
					<ul class="footerlinks three-icons">
						<li><a href="https://twitter.com/gentoo" title="@Gentoo on Twitter"><span class="fa fa-twitter fa-fw"></span></a></li>
						<li><a href="https://plus.google.com/+Gentoo" title="+Gentoo on Google+"><span class="fa fa-google-plus fa-fw"></span></a></li>
						<li><a href="https://www.facebook.com/gentoo.org" title="Gentoo on Facebook"><span class="fa fa-facebook fa-fw"></span></a></li>
					</ul>
				</div>
				<div class="col-xs-9 col-md-9">
					<strong>&copy; 2001&ndash;2016 Gentoo Foundation, Inc.</strong><br />
					<small>
						Gentoo is a trademark of the Gentoo Foundation, Inc.
						The contents of this document, unless otherwise expressly stated, are licensed under the
						<a href="https://creativecommons.org/licenses/by-sa/3.0/" rel="license">CC-BY-SA-3.0</a> license.
						The <a href="https://www.gentoo.org/inside-gentoo/foundation/name-logo-guidelines.html">Gentoo Name and Logo Usage Guidelines</a> apply.
					</small>
				</div>
			</div>
		</div>
	</footer>
	
		<script>
			window.RLQ = window.RLQ || []; window.RLQ.push( function () {
				$.getScript("https://assets.gentoo.org/tyrian/bootstrap.min.js");
			} );
		</script>
		<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.state({"user":"ready","user.groups":"ready"});
} );</script>
<link rel="stylesheet" href="/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.skinning.content.externallinks&amp;only=styles&amp;skin=tyrian" />
<script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.loader.load(["ext.smw.tooltips","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.uls.pt"]);
} );</script><script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['setDocumentTitle', "QEMU/Windows guest"]);
  _paq.push(['setIgnoreClasses', 'image']);
  _paq.push(['trackPageView']);
  _paq.push(['disableCookies']);
  _paq.push(['enableLinkTracking']);
  
  (function() {
    var u="//piwik.gentoo.org//";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', 1]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//piwik.gentoo.org//piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript><script>window.RLQ = window.RLQ || []; window.RLQ.push( function () {
mw.config.set({"wgBackendResponseTime":1152});
} );</script></body></html>